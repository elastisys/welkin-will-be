
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Kubernetes platform to comply with Swedish Healthcare (Patientdatalagen), GDPR and ISO 27001." name="description"/>
<meta content="Elastisys AB" name="author"/>
<link href="https://elastisys.io/compliantkubernetes/user-guide/self-managed-services/ferretdb/" rel="canonical"/>
<link href="../../additional-services/argocd/" rel="prev"/>
<link href="../keycloak/" rel="next"/>
<link href="https://elastisys.io/compliantkubernetes/img/favicon.ico" rel="icon"/>
<meta content="mkdocs-1.5.2, mkdocs-material-9.1.21" name="generator"/>
<title>FerretDB (self-managed) - Elastisys Compliant Kubernetes</title>
<link href="../../../assets/stylesheets/main.eebd395e.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.ecc896b0.min.css" rel="stylesheet"/>
<link href="../../../stylesheets/branding.css" rel="stylesheet"/>
<link href="../../../stylesheets/extra.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://matomo.elastisys.com/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '2']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->
<meta content="website" property="og:type"/>
<meta content="FerretDB (self-managed) - Elastisys Compliant Kubernetes" property="og:title"/>
<meta content="Kubernetes platform to comply with Swedish Healthcare (Patientdatalagen), GDPR and ISO 27001." property="og:description"/>
<meta content="https://elastisys.io/compliantkubernetes/assets/images/social/user-guide/self-managed-services/ferretdb.png" property="og:image"/>
<meta content="image/png" property="og:image:type"/>
<meta content="1200" property="og:image:width"/>
<meta content="630" property="og:image:height"/>
<meta content="https://elastisys.io/compliantkubernetes/user-guide/self-managed-services/ferretdb/" property="og:url"/>
<meta content="summary_large_image" name="twitter:card"/>
<meta content="FerretDB (self-managed) - Elastisys Compliant Kubernetes" name="twitter:title"/>
<meta content="Kubernetes platform to comply with Swedish Healthcare (Patientdatalagen), GDPR and ISO 27001." name="twitter:description"/>
<meta content="https://elastisys.io/compliantkubernetes/assets/images/social/user-guide/self-managed-services/ferretdb.png" name="twitter:image"/>
<meta content="
  default-src 'self';
  style-src 'self' 'unsafe-inline';
  img-src 'self' data:;
  connect-src 'self' https://matomo.elastisys.com/;
  script-src 'self' 'unsafe-inline' https://matomo.elastisys.com/;
" http-equiv="Content-Security-Policy"/>
<!-- Disable localStorage, sessionStorage and cookies -->
<script>
if (window.localStorage) {
  window.localStorage.setItem = function() { };
  window.localStorage.clear();
}
if (window.sessionStorage) {
  window.sessionStorage.setItem = function() { }
  window.sessionStorage.clear();
}
if(!document.__defineGetter__) {
  Object.defineProperty(document, 'cookie', {
    get: function(){return ''},
    set: function(){return true},
  });
} else {
  document.__defineGetter__("cookie", function() { return '';} );
  document.__defineSetter__("cookie", function() {} );
}
</script>
<!-- See https://realfavicongenerator.net -->
<link href="https://elastisys.io/compliantkubernetes/img/apple-touch-icon.png?v=1" rel="apple-touch-icon" sizes="180x180"/>
<link href="https://elastisys.io/compliantkubernetes/img/favicon-32x32.png?v=1" rel="icon" sizes="32x32" type="image/png"/>
<link href="https://elastisys.io/compliantkubernetes/img/favicon-16x16.png?v=1" rel="icon" sizes="16x16" type="image/png"/>
<link href="https://elastisys.io/compliantkubernetes/img/site.webmanifest?v=1" rel="manifest"/>
<link color="#5bbad5" href="https://elastisys.io/compliantkubernetes/img/safari-pinned-tab.svg?v=1" rel="mask-icon"/>
<link href="https://elastisys.io/compliantkubernetes/img/favicon.ico?v=1" rel="shortcut icon"/>
<meta content="#2b5797" name="msapplication-TileColor"/>
<meta content="https://elastisys.io/compliantkubernetes/img/browserconfig.xml?v=1" name="msapplication-config"/>
<meta content="#ffffff" name="theme-color"/>
<link href="../../../assets/stylesheets/extra-style.by0uv4wm.min.css" rel="stylesheet"/></head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="elastisys" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#ferretdb-self-managed">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<div data-md-color-scheme="default" data-md-component="outdated" hidden="">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Elastisys Compliant Kubernetes" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="Elastisys Compliant Kubernetes">
<img alt="logo" src="../../../img/logo.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Elastisys Compliant Kubernetes
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              FerretDB (self-managed)
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<ul class="header-links">
<li>
<a href="https://github.com/elastisys/compliantkubernetes/">
<img alt="Git logo" src="../../../img/git-alt.svg" width="25px">
</img></a>
</li>
<li><a class="menu-callout" href="https://elastisys.com/">Try out Managed<br/>Compliant Kubernetes</a></li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Elastisys Compliant Kubernetes" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="Elastisys Compliant Kubernetes">
<img alt="logo" src="../../../img/logo.png"/>
</a>
    Elastisys Compliant Kubernetes
  </label>
<div class="md-nav__source">
<ul class="header-links">
<li>
<a href="https://github.com/elastisys/compliantkubernetes/">
<img alt="Git logo" src="../../../img/git-alt.svg" width="25px">
</img></a>
</li>
<li><a class="menu-callout" href="https://elastisys.com/">Try out Managed<br/>Compliant Kubernetes</a></li>
</ul>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
        Overview
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          For Application Developers
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          For Application Developers
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_1">
<span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../prepare/">
        Step 1: Prepare
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../deploy/">
        Step 2: Deploy
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operate/">
        Step 3: Operate
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
          Go Deeper
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
          Go Deeper
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../prepare-application/">
        Prepare Your Application
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../prepare-idp/">
        Prepare Your Identity Provider (IdP)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../registry/">
        Container registry
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../continous-development/">
        Continous Development
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../network-model/">
        Network Model
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kubernetes-api/">
        Kubernetes API
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kubernetes-ui/">
        Kubernetes UI (Lens)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../namespaces/">
        Namespaces
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../logs/">
        Logs
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../log-based-alerts/">
        Log-based Alerts
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../long-term-log-retention/">
        Long-term Log Retention
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../metrics/">
        Metrics
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../alerts/">
        Metric Alerts
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../maintenance/">
        Maintenance
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../backup/">
        Backups
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ci-cd/">
        CI/CD
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../demarcation/">
        Demarcation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../delegation/">
        How to Delegate
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-many-environments/">
        How many environments?
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          Safeguards
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
          Safeguards
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../safeguards/">
        Overview
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../safeguards/enforce-no-root/">
        Enforce No Root
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../safeguards/enforce-podsecuritypolicies/">
        Enforce Restricted Privileges
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../safeguards/enforce-networkpolicies/">
        Enforce NetworkPolicies
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../safeguards/enforce-resources/">
        Enforce Resources
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../safeguards/enforce-trusted-registries/">
        Enforce Trusted Registries
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../safeguards/enforce-no-latest-tag/">
        Enforce No Latest Tag
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../safeguards/enforce-job-ttl/">
        Enforce Job TTL
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
          Additional Services
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_4">
<span class="md-nav__icon md-icon"></span>
          Additional Services
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../additional-services/">
        Overview
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../additional-services/postgresql/">
        PostgreSQL
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../additional-services/timescaledb/">
        TimescaleDB
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../additional-services/redis/">
        Redis
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../additional-services/rabbitmq/">
        RabbitMQ
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../additional-services/jaeger/">
        Jaeger (preview)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../additional-services/argocd/">
        Argo CD (preview)
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
          Self-Managed Services
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_5">
<span class="md-nav__icon md-icon"></span>
          Self-Managed Services
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          FerretDB (self-managed)
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        FerretDB (self-managed)
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#pushing-ferretdb-image-to-harbor">
    Pushing FerretDB image to Harbor
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#install">
    Install
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#python-client-example">
    Python client example
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#security">
    Security
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#known-issues-limitations">
    Known Issues / Limitations
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#further-reading">
    Further Reading
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../keycloak/">
        Keycloak (self-managed)
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../go-live/">
        Go-live Checklist
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../troubleshooting/">
        Troubleshooting
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../faq/">
        FAQ
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          For Platform Administrators
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          For Platform Administrators
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operator-manual/">
        Overview
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operator-manual/getting-started/">
        Getting Started
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operator-manual/provider-audit/">
        Provider Audit
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operator-manual/on-prem-standard/">
        Standard Template for on-prem Environment
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operator-manual/qa/">
        QA
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
          Advanced Configuration
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_6">
<span class="md-nav__icon md-icon"></span>
          Advanced Configuration
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operator-manual/configure/">
        Overview
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operator-manual/cluster-sizing/">
        Sizing
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operator-manual/ingress/">
        Ingress
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operator-manual/access-control/">
        Access Control
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operator-manual/user-alerts/">
        User Alerts
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operator-manual/disaster-recovery/">
        Disaster Recovery
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operator-manual/break-glass/">
        Breaking the Glass
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operator-manual/cryptography/">
        Use of Cryptography
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operator-manual/credentials/">
        Use of Credentials
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operator-manual/capacity-management/">
        Capacity Management
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operator-manual/maintenance/">
        Maintenance
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operator-manual/troubleshooting/">
        Troubleshooting
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operator-manual/faq/">
        FAQ
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../operator-manual/additional-services/">
        Additional Services
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          For CISOs and DPOs
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          For CISOs and DPOs
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ciso-guide/">
        Overview
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ciso-guide/controls/iso-27001/">
        ISO 27001
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ciso-guide/controls/hslf-fs-201640/">
        HSLF-FS 2016:40
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ciso-guide/controls/msbfs-20207/">
        MSBFS 2020:7
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ciso-guide/controls/gdpr/">
        GDPR
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ciso-guide/controls/hipaa/">
        HIPAA
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ciso-guide/controls/bsi-it-grundschutz/">
        BSI IT-Grundschutz
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ciso-guide/controls/mdr/">
        MDR
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_9" id="__nav_4_9_label" tabindex="0">
          CISO Dashboards
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_9_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_9">
<span class="md-nav__icon md-icon"></span>
          CISO Dashboards
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ciso-guide/audit-logs/">
        Audit Logs
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ciso-guide/backup/">
        Backup Dashboard
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ciso-guide/cryptography/">
        Cryptography Dashboard
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ciso-guide/intrusion-detection/">
        Intrusion Detection Dashboard
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ciso-guide/policy-as-code/">
        Policy-as-Code Dashboard
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ciso-guide/network-security/">
        Network Security Dashboard
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ciso-guide/capacity-management/">
        Capacity Management (Kubernetes Status) Dashboard
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ciso-guide/vulnerability/">
        Vulnerability Dashboard
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ciso-guide/log-review/">
        Log Review
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ciso-guide/faq/">
        FAQ
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ciso-guide/gdpr-art-17/">
        How do I comply with GDPR Art. 17 Right to erasure ("right to be forgotten")?
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          For Contributors
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          For Contributors
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../contributor-guide/">
        Overview
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../architecture/">
        Architecture
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../adr/">
        Architectural Decision Log
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../tech-radar/">
        Tech Radar
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Release Notes
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
          Release Notes
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../release-notes/ck8s/">
        Compliant Kubernetes
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../release-notes/kubespray/">
        CK8S Kubespray
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../release-notes/postgres/">
        CK8S PostgreSQL
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../release-notes/rabbitmq/">
        CK8S RabbitMQ
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../release-notes/redis/">
        CK8S Redis
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../release-notes/jaeger/">
        CK8S Jaeger
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../release-notes/argocd/">
        CK8S Argo CD
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../glossary/">
        Glossary
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../roadmap/">
        Roadmap
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://elastisys.com/">
        Support
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://elastisys.com/training/">
        Training
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://elastisys.com/blog/">
        Blog
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://elastisys.com/privacy-policy/">
        Privacy Policy
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#pushing-ferretdb-image-to-harbor">
    Pushing FerretDB image to Harbor
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#install">
    Install
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#python-client-example">
    Python client example
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#security">
    Security
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#known-issues-limitations">
    Known Issues / Limitations
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#further-reading">
    Further Reading
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="ferretdb-self-managed">FerretDB® (self-managed)<a class="headerlink" href="#ferretdb-self-managed" title="Permanent link">¶</a></h1>
<!-- BEGIN INCLUDE ./_common.include '&lt;!--disclaimer-start--&gt;' '&lt;!--disclaimer-end--&gt;' -->
<div class="admonition important">
<p class="admonition-title">This page describes how to install a Customer Application</p>
<p>You are solely responsible for Customer Applications.</p>
<p>If you are an Elastisys Managed Services customer, please review your responsibilities in <a href="https://elastisys.com/legal/terms-of-service/#52-customer-applications">ToS 5.2</a>.</p>
<p>Specifically, you are responsible for performing due diligence for the project discussed in this page.
At the very least, you must:</p>
<ul>
<li>assess project ownership, governance and licensing;</li>
<li>assess project roadmap and future suitability;</li>
<li>assess project compatibility with your use-case;</li>
<li>assess business continuity, i.e., what will you do if the project is abandoned;</li>
<li>subscribe to security advisories related to the project;</li>
<li>apply security patches and updates, as needed;</li>
<li>regularly test disaster recovery.</li>
</ul>
</div>
<!-- END INCLUDE -->
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>FerretDB® tries to be a drop-in replacement for MongoDB®. However:</p>
<ul>
<li>There are <a href="https://docs.ferretdb.io/diff/">known differences</a>.</li>
<li>There might also be performance implications.</li>
</ul>
<p>Make sure to load-test your application with FerretDB before going into production.</p>
</div>
<p><a href="https://www.ferretdb.io/">FerretDB</a> is a database that is an open-source alternative to MongoDB that uses PostgreSQL as its backend database. This documentation details how to run FerretDB in a Compliant Kubernetes cluster using the Managed <a href="../../additional-services/postgresql/">PostgreSQL service</a>.</p>
<h2 id="pushing-ferretdb-image-to-harbor">Pushing FerretDB image to Harbor<a class="headerlink" href="#pushing-ferretdb-image-to-harbor" title="Permanent link">¶</a></h2>
<p>These instructions will pull the FerretDB container image and push it to another registry. If you are using managed Harbor as your container registry, please follow <a href="../../deploy/">these instructions</a> on how to authenticate, create a new project, and how to create a robot account and using it in a pull-secret to be able to pull an image from Harbor to your cluster safely:</p>
<div class="highlight"><pre><span></span><code><span class="nv">TAG</span><span class="o">=</span><span class="m">1</span>.0.0
<span class="nv">REGISTRY</span><span class="o">=</span>harbor.<span class="nv">$DOMAIN</span>
<span class="nv">REGISTRY_PROJECT</span><span class="o">=</span>demo

docker<span class="w"> </span>pull<span class="w"> </span>ghcr.io/ferretdb/ferretdb:<span class="nv">$TAG</span>
docker<span class="w"> </span>tag<span class="w"> </span>ghcr.io/ferretdb/ferretdb:<span class="nv">$TAG</span><span class="w"> </span><span class="nv">$REGISTRY</span>/<span class="nv">$REGISTRY_PROJECT</span>/ferretdb:<span class="nv">$TAG</span>
docker<span class="w"> </span>push<span class="w"> </span><span class="nv">$REGISTRY</span>/<span class="nv">$REGISTRY_PROJECT</span>/ferretdb:<span class="nv">$TAG</span>
</code></pre></div>
<h2 id="install">Install<a class="headerlink" href="#install" title="Permanent link">¶</a></h2>
<p>In a managed CK8s environment, follow <a href="../../additional-services/postgresql/#getting-access">these instructions</a> on how to access the Managed PostgreSQL service and how to create an application user and database.</p>
<p>Create secret containing a PostgreSQL URL to authenticate to the Managed PostgreSQL service and newly created database with the application user credentials:
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>create<span class="w"> </span>secret<span class="w"> </span>generic<span class="w"> </span>--from-literal<span class="o">=</span>ferretdb-url<span class="o">=</span><span class="s2">"postgresql://</span><span class="nv">$APP_USERNAME</span><span class="s2">:</span><span class="nv">$APP_PASSWORD</span><span class="s2">@</span><span class="nv">$PGHOST</span><span class="s2">:</span><span class="nv">$PGPORT</span><span class="s2">/</span><span class="nv">$APP_DATABASE</span><span class="s2">"</span><span class="w"> </span>ferretdb-postgres-credentials
</code></pre></div></p>
<p>Deploy:
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ferretdb</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ferretdb</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ferretdb</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ferretdb</span>
<span class="w">    </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">      </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ferretdb</span>
<span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$REGISTRY/$REGISTRY_PROJECT/ferretdb:$TAG</span><span class="w"> </span><span class="c1"># replace this</span>
<span class="w">        </span><span class="nt">args</span><span class="p">:</span>
<span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--listen-addr=0.0.0.0:27017</span>
<span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--telemetry=disable</span>
<span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--postgresql-url=$(FERRETDB_URL)</span>
<span class="w">        </span><span class="nt">env</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FERRETDB_URL</span>
<span class="w">          </span><span class="nt">valueFrom</span><span class="p">:</span>
<span class="w">            </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ferretdb-postgres-credentials</span>
<span class="w">              </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ferretdb-url</span>
<span class="w">        </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">          </span><span class="nt">requests</span><span class="p">:</span>
<span class="w">            </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="s">"1000m"</span>
<span class="w">            </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="s">"15M"</span>
<span class="w">        </span><span class="nt">securityContext</span><span class="p">:</span>
<span class="w">          </span><span class="nt">capabilities</span><span class="p">:</span>
<span class="w">            </span><span class="nt">drop</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ALL</span>
<span class="w">          </span><span class="nt">runAsNonRoot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">          </span><span class="nt">runAsUser</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1001</span>
<span class="w">        </span><span class="nt">volumeMounts</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">mountPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/state</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">state</span>
<span class="w">      </span><span class="nt">securityContext</span><span class="p">:</span>
<span class="w">        </span><span class="nt">fsGroup</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1001</span>
<span class="w">      </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">state</span>
<span class="w">        </span><span class="nt">emptyDir</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="nn">---</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Service</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ferretdb-service</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ferretdb</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterIP</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">   </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ferretdb</span>
<span class="w">  </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">27017</span>
<span class="w">      </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">27017</span>
</code></pre></div></p>
<p>Check that FerretDB started properly:</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>kubectl<span class="w"> </span>get<span class="w"> </span>svc,deploy,pod<span class="w"> </span>-l<span class="w"> </span><span class="nv">run</span><span class="o">=</span>ferretdb
<span class="go">NAME                       TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)     AGE</span>
<span class="go">service/ferretdb-service   ClusterIP   10.233.42.102   &lt;none&gt;        27017/TCP   75s</span>

<span class="go">NAME                       READY   UP-TO-DATE   AVAILABLE   AGE</span>
<span class="go">deployment.apps/ferretdb   1/1     1            1           75s</span>

<span class="go">NAME                            READY   STATUS    RESTARTS   AGE</span>
<span class="go">pod/ferretdb-5887cc848c-brwjf   1/1     Running   0          75s</span>
</code></pre></div>
<p>The Deployment should show <code>STATUS</code> is <code>Running</code>. The Pod(s) should have <code>STATUS</code> is <code>Running</code>.</p>
<p>To try out access to FerretDB, you can port-forward the Service to localhost and connect using mongosh:
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>port-forward<span class="w"> </span>svc/ferretdb-service<span class="w"> </span><span class="m">27017</span>

mongosh<span class="w"> </span>mongodb://localhost:27017
</code></pre></div></p>
<h2 id="python-client-example">Python client example<a class="headerlink" href="#python-client-example" title="Permanent link">¶</a></h2>
<p>The following is an example of how to connect to FerretDB using the <a href="https://pymongo.readthedocs.io/en/stable/">PyMongo</a> Python library (using the localhost port-forwarding described above).</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pymongo</span> <span class="kn">import</span> <span class="n">MongoClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">MongoClient</span><span class="p">(</span><span class="s1">'mongodb://localhost:27017'</span><span class="p">)</span>

<span class="c1"># List all databases</span>
<span class="nb">print</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">list_database_names</span><span class="p">())</span>

<span class="c1"># List collections in the database "mongodb"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">client</span><span class="p">[</span><span class="s1">'mongodb'</span><span class="p">]</span><span class="o">.</span><span class="n">list_collection_names</span><span class="p">())</span>

<span class="c1"># Create db and insert element into a collection</span>
<span class="n">database</span>   <span class="o">=</span> <span class="n">client</span><span class="p">[</span><span class="s1">'test_db'</span><span class="p">]</span>
<span class="n">collection</span> <span class="o">=</span> <span class="n">database</span><span class="p">[</span><span class="s1">'customers'</span><span class="p">]</span>

<span class="n">mydict</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"John"</span><span class="p">,</span> <span class="s2">"address"</span><span class="p">:</span> <span class="s2">"Highway 38"</span> <span class="p">}</span>

<span class="n">collection</span><span class="o">.</span><span class="n">insert_one</span><span class="p">(</span><span class="n">mydict</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">collection</span><span class="o">.</span><span class="n">find_one</span><span class="p">())</span>
</code></pre></div>
<p>See the following <code>pg_dump</code> below to see how the example above is mapped in the actual backend Postgres database.</p>
<details>
<summary>pg_dump</summary>
<div class="highlight"><pre><span></span><code><span class="c1">--</span>
<span class="c1">-- PostgreSQL database dump</span>
<span class="c1">--</span>

<span class="c1">-- Dumped from database version 14.6 (Ubuntu 14.6-1.pgdg22.04+1)</span>
<span class="c1">-- Dumped by pg_dump version 15.1 (Ubuntu 15.1-1.pgdg22.04+1)</span>

<span class="k">SET</span><span class="w"> </span><span class="n">statement_timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="k">SET</span><span class="w"> </span><span class="n">lock_timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="k">SET</span><span class="w"> </span><span class="n">idle_in_transaction_session_timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="k">SET</span><span class="w"> </span><span class="n">client_encoding</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'UTF8'</span><span class="p">;</span>
<span class="k">SET</span><span class="w"> </span><span class="n">standard_conforming_strings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">on</span><span class="p">;</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">pg_catalog</span><span class="p">.</span><span class="n">set_config</span><span class="p">(</span><span class="s1">'search_path'</span><span class="p">,</span><span class="w"> </span><span class="s1">''</span><span class="p">,</span><span class="w"> </span><span class="k">false</span><span class="p">);</span>
<span class="k">SET</span><span class="w"> </span><span class="n">check_function_bodies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>
<span class="k">SET</span><span class="w"> </span><span class="n">xmloption</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">content</span><span class="p">;</span>
<span class="k">SET</span><span class="w"> </span><span class="n">client_min_messages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">warning</span><span class="p">;</span>
<span class="k">SET</span><span class="w"> </span><span class="n">row_security</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">off</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Name: test_db; Type: SCHEMA; Schema: -; Owner: ferretdb</span>
<span class="c1">--</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">test_db</span><span class="p">;</span>


<span class="k">ALTER</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">test_db</span><span class="w"> </span><span class="k">OWNER</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">ferretdb</span><span class="p">;</span>

<span class="k">SET</span><span class="w"> </span><span class="n">default_tablespace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">''</span><span class="p">;</span>

<span class="k">SET</span><span class="w"> </span><span class="n">default_table_access_method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">heap</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Name: _ferretdb_database_metadata; Type: TABLE; Schema: test_db; Owner: ferretdb</span>
<span class="c1">--</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">test_db</span><span class="p">.</span><span class="n">_ferretdb_database_metadata</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">_jsonb</span><span class="w"> </span><span class="n">jsonb</span>
<span class="p">);</span>


<span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">test_db</span><span class="p">.</span><span class="n">_ferretdb_database_metadata</span><span class="w"> </span><span class="k">OWNER</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">ferretdb</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Name: customers_c09344de; Type: TABLE; Schema: test_db; Owner: ferretdb</span>
<span class="c1">--</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">test_db</span><span class="p">.</span><span class="n">customers_c09344de</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">_jsonb</span><span class="w"> </span><span class="n">jsonb</span>
<span class="p">);</span>


<span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">test_db</span><span class="p">.</span><span class="n">customers_c09344de</span><span class="w"> </span><span class="k">OWNER</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">ferretdb</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Data for Name: _ferretdb_database_metadata; Type: TABLE DATA; Schema: test_db; Owner: ferretdb</span>
<span class="c1">--</span>

<span class="k">COPY</span><span class="w"> </span><span class="n">test_db</span><span class="p">.</span><span class="n">_ferretdb_database_metadata</span><span class="w"> </span><span class="p">(</span><span class="n">_jsonb</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="k">stdin</span><span class="p">;</span>
<span class="err">{</span><span class="ss">"$s"</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="ss">"p"</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="ss">"_id"</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="ss">"t"</span><span class="p">:</span><span class="w"> </span><span class="ss">"string"</span><span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="ss">"table"</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="ss">"t"</span><span class="p">:</span><span class="w"> </span><span class="ss">"string"</span><span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="ss">"indexes"</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="ss">"i"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">{</span><span class="ss">"t"</span><span class="p">:</span><span class="w"> </span><span class="ss">"object"</span><span class="p">,</span><span class="w"> </span><span class="ss">"$s"</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="ss">"p"</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="ss">"key"</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="ss">"t"</span><span class="p">:</span><span class="w"> </span><span class="ss">"object"</span><span class="p">,</span><span class="w"> </span><span class="ss">"$s"</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="ss">"p"</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="ss">"_id"</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="ss">"t"</span><span class="p">:</span><span class="w"> </span><span class="ss">"int"</span><span class="err">}}</span><span class="p">,</span><span class="w"> </span><span class="ss">"$k"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="ss">"_id"</span><span class="p">]</span><span class="err">}}</span><span class="p">,</span><span class="w"> </span><span class="ss">"name"</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="ss">"t"</span><span class="p">:</span><span class="w"> </span><span class="ss">"string"</span><span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="ss">"unique"</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="ss">"t"</span><span class="p">:</span><span class="w"> </span><span class="ss">"bool"</span><span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="ss">"pgindex"</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="ss">"t"</span><span class="p">:</span><span class="w"> </span><span class="ss">"string"</span><span class="err">}}</span><span class="p">,</span><span class="w"> </span><span class="ss">"$k"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="ss">"pgindex"</span><span class="p">,</span><span class="w"> </span><span class="ss">"name"</span><span class="p">,</span><span class="w"> </span><span class="ss">"key"</span><span class="p">,</span><span class="w"> </span><span class="ss">"unique"</span><span class="p">]</span><span class="err">}}</span><span class="p">],</span><span class="w"> </span><span class="ss">"t"</span><span class="p">:</span><span class="w"> </span><span class="ss">"array"</span><span class="err">}}</span><span class="p">,</span><span class="w"> </span><span class="ss">"$k"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="ss">"_id"</span><span class="p">,</span><span class="w"> </span><span class="ss">"table"</span><span class="p">,</span><span class="w"> </span><span class="ss">"indexes"</span><span class="p">]</span><span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="ss">"_id"</span><span class="p">:</span><span class="w"> </span><span class="ss">"customers"</span><span class="p">,</span><span class="w"> </span><span class="ss">"table"</span><span class="p">:</span><span class="w"> </span><span class="ss">"customers_c09344de"</span><span class="p">,</span><span class="w"> </span><span class="ss">"indexes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">{</span><span class="ss">"key"</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="ss">"_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="ss">"name"</span><span class="p">:</span><span class="w"> </span><span class="ss">"_id_"</span><span class="p">,</span><span class="w"> </span><span class="ss">"unique"</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span><span class="w"> </span><span class="ss">"pgindex"</span><span class="p">:</span><span class="w"> </span><span class="ss">"customers__id__e06693c2_idx"</span><span class="err">}</span><span class="p">]</span><span class="err">}</span>
<span class="err">\</span><span class="p">.</span>


<span class="c1">--</span>
<span class="c1">-- Data for Name: customers_c09344de; Type: TABLE DATA; Schema: test_db; Owner: ferretdb</span>
<span class="c1">--</span>

<span class="k">COPY</span><span class="w"> </span><span class="n">test_db</span><span class="p">.</span><span class="n">customers_c09344de</span><span class="w"> </span><span class="p">(</span><span class="n">_jsonb</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="k">stdin</span><span class="p">;</span>
<span class="err">{</span><span class="ss">"$s"</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="ss">"p"</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="ss">"_id"</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="ss">"t"</span><span class="p">:</span><span class="w"> </span><span class="ss">"objectId"</span><span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="ss">"name"</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="ss">"t"</span><span class="p">:</span><span class="w"> </span><span class="ss">"string"</span><span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="ss">"address"</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="ss">"t"</span><span class="p">:</span><span class="w"> </span><span class="ss">"string"</span><span class="err">}}</span><span class="p">,</span><span class="w"> </span><span class="ss">"$k"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="ss">"_id"</span><span class="p">,</span><span class="w"> </span><span class="ss">"name"</span><span class="p">,</span><span class="w"> </span><span class="ss">"address"</span><span class="p">]</span><span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="ss">"_id"</span><span class="p">:</span><span class="w"> </span><span class="ss">"6454cd232da4567e5cd31f39"</span><span class="p">,</span><span class="w"> </span><span class="ss">"name"</span><span class="p">:</span><span class="w"> </span><span class="ss">"John"</span><span class="p">,</span><span class="w"> </span><span class="ss">"address"</span><span class="p">:</span><span class="w"> </span><span class="ss">"Highway 37"</span><span class="err">}</span>
<span class="err">\</span><span class="p">.</span>


<span class="c1">--</span>
<span class="c1">-- Name: _ferretdb_database_metadata_id_idx; Type: INDEX; Schema: test_db; Owner: ferretdb</span>
<span class="c1">--</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">_ferretdb_database_metadata_id_idx</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">test_db</span><span class="p">.</span><span class="n">_ferretdb_database_metadata</span><span class="w"> </span><span class="k">USING</span><span class="w"> </span><span class="n">btree</span><span class="w"> </span><span class="p">(((</span><span class="n">_jsonb</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s1">'_id'</span><span class="p">::</span><span class="nb">text</span><span class="p">)));</span>


<span class="c1">--</span>
<span class="c1">-- Name: customers__id__e06693c2_idx; Type: INDEX; Schema: test_db; Owner: ferretdb</span>
<span class="c1">--</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">customers__id__e06693c2_idx</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">test_db</span><span class="p">.</span><span class="n">customers_c09344de</span><span class="w"> </span><span class="k">USING</span><span class="w"> </span><span class="n">btree</span><span class="w"> </span><span class="p">(((</span><span class="n">_jsonb</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s1">'_id'</span><span class="p">::</span><span class="nb">text</span><span class="p">)));</span>


<span class="c1">--</span>
<span class="c1">-- PostgreSQL database dump complete</span>
<span class="c1">--</span>
</code></pre></div>
</details>
<h2 id="security">Security<a class="headerlink" href="#security" title="Permanent link">¶</a></h2>
<p>FerretDB supports securing connections between FerretDB and client with TLS. All you need is to specify additional run-time arguments or environment variables, as described in the <a href="https://docs.ferretdb.io/category/security/">FerretDB documentation</a>.</p>
<h2 id="known-issues-limitations">Known Issues / Limitations<a class="headerlink" href="#known-issues-limitations" title="Permanent link">¶</a></h2>
<ul>
<li>FerretDB currently does not support user management.</li>
<li>FerretDB currently does not support role management.</li>
<li>FerretDB currently does not allow for optimizations or tweaks to the underlying PostgreSQL schema that is used by FerretDB as it translates MongoDB collections to PostgreSQL tables.</li>
</ul>
<blockquote>
<p><strong>Note</strong> <br/>
As of May 2023, the project was recently released to its first major version (v1.0.0) and is constantly being developed and improved, hence, these issues may have already been solved depending on when you are reading this. Check <a href="https://docs.ferretdb.io/reference/supported-commands/">supported commands</a> for FerretDB to see what is currently available.</p>
</blockquote>
<h2 id="further-reading">Further Reading<a class="headerlink" href="#further-reading" title="Permanent link">¶</a></h2>
<ul>
<li><a href="https://github.com/FerretDB/FerretDB">FerretDB GitHub</a></li>
<li><a href="https://docs.ferretdb.io/">FerretDB documentation</a></li>
<li><a href="https://docs.ferretdb.io/reference/supported-commands/">FerretDB supported commands</a></li>
<li><a href="https://www.mongodb.com/docs/mongodb-shell/">MongoDB Shell (mongosh)</a></li>
</ul>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
            Back to top
          </button>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Argo CD (preview)" class="md-footer__link md-footer__link--prev" href="../../additional-services/argocd/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                Argo CD (preview)
              </div>
</div>
</a>
<a aria-label="Next: Keycloak (self-managed)" class="md-footer__link md-footer__link--next" href="../keycloak/" rel="next">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                Keycloak (self-managed)
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright © Elastisys AB <br/> The Linux Foundation has the following registered trademarks in the United States and/or other countries: Certified Kubernetes®, containerd®, fluentd®, Helm®, Istio®, K8s®, Kubernetes®, Prometheus®, PromQL®, Rook®, The Linux Foundation®. <br/> The Linux Foundation has registrations pending or trademarks in use for the following marks in the United States and/or other countries: Argo™, CoreDNS™, Falco™, Harbor™, Jaeger™, Linux Foundation™, OpenTelemetry™, OpenTracing™, Open Policy Agent™, Tekton™, Thanos™. <br/> Postgres and PostgreSQL and the Elephant Logo (Slonik) are all registered trademarks of the PostgreSQL Community Association of Canada. <br/> Redis is a trademark of Redis Ltd. Any rights therein are reserved to Redis Ltd. Any use by the Compliant Kubernetes project is for referential purposes only and does not indicate any sponsorship, endorsement or affiliation between Redis and Compliant Kubernetes project. <br/> RabbitMQ is a trademark of VMware, Inc. in the U.S. and other countries. <br/> TimescaleDB and the EON mascot are trademarks of <a href="https://www.timescale.com/">Timescale, Inc.</a> <br/> FerretDB® is a registered trademark of FerretDB, Inc. FerretDB Inc. is not affiliated, associated, authorized, endorsed by, or in any way officially connected with MongoDB Inc., or any of its subsidiaries or its affiliates. <br/> MongoDB, Mongo, and the leaf logo are registered trademarks of MongoDB, Inc. <br/> Keycloak™ is a trademark of Red Hat Inc. <br/> OpenSearch is a registered trademark of Amazon Web Services. <br/> NGINX is a registered trademark of F5 Inc.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate", "content.code.copy", "content.tabs.link", "navigation.footer", "navigation.top"], "search": "../../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
<script src="../../../assets/javascripts/bundle.220ee61c.min.js"></script>
</body>
</html>