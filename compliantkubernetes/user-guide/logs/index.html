
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="How to work with logs in Elastisys Compliant Kubernetes, the security-focused Kubernetes distribution." name="description"/>
<meta content="Elastisys AB" name="author"/>
<link href="https://elastisys.io/compliantkubernetes/user-guide/logs/" rel="canonical"/>
<link href="../namespaces/" rel="prev"/>
<link href="../log-based-alerts/" rel="next"/>
<link href="https://elastisys.io/compliantkubernetes/img/favicon.ico" rel="icon"/>
<meta content="mkdocs-1.5.3, mkdocs-material-9.1.21" name="generator"/>
<title>Logs - Elastisys Compliant Kubernetes</title>
<link href="../../assets/stylesheets/main.eebd395e.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.ecc896b0.min.css" rel="stylesheet"/>
<link href="../../stylesheets/branding.css" rel="stylesheet"/>
<link href="../../stylesheets/extra.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://matomo.elastisys.com/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '2']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->
<meta content="website" property="og:type"/>
<meta content="Logs - Elastisys Compliant Kubernetes" property="og:title"/>
<meta content="How to work with logs in Elastisys Compliant Kubernetes, the security-focused Kubernetes distribution." property="og:description"/>
<meta content="https://elastisys.io/compliantkubernetes/assets/images/social/user-guide/logs.png" property="og:image"/>
<meta content="image/png" property="og:image:type"/>
<meta content="1200" property="og:image:width"/>
<meta content="630" property="og:image:height"/>
<meta content="https://elastisys.io/compliantkubernetes/user-guide/logs/" property="og:url"/>
<meta content="summary_large_image" name="twitter:card"/>
<meta content="Logs - Elastisys Compliant Kubernetes" name="twitter:title"/>
<meta content="How to work with logs in Elastisys Compliant Kubernetes, the security-focused Kubernetes distribution." name="twitter:description"/>
<meta content="https://elastisys.io/compliantkubernetes/assets/images/social/user-guide/logs.png" name="twitter:image"/>
<meta content="
  default-src 'self';
  style-src 'self' 'unsafe-inline';
  img-src 'self' data:;
  connect-src 'self' https://matomo.elastisys.com/;
  script-src 'self' 'unsafe-inline' https://matomo.elastisys.com/;
" http-equiv="Content-Security-Policy"/>
<!-- Disable localStorage, sessionStorage and cookies -->
<script>
if (window.localStorage) {
  window.localStorage.setItem = function() { };
  window.localStorage.clear();
}
if (window.sessionStorage) {
  window.sessionStorage.setItem = function() { }
  window.sessionStorage.clear();
}
if(!document.__defineGetter__) {
  Object.defineProperty(document, 'cookie', {
    get: function(){return ''},
    set: function(){return true},
  });
} else {
  document.__defineGetter__("cookie", function() { return '';} );
  document.__defineSetter__("cookie", function() {} );
}
</script>
<!-- See https://realfavicongenerator.net -->
<link href="https://elastisys.io/compliantkubernetes/img/apple-touch-icon.png?v=1" rel="apple-touch-icon" sizes="180x180"/>
<link href="https://elastisys.io/compliantkubernetes/img/favicon-32x32.png?v=1" rel="icon" sizes="32x32" type="image/png"/>
<link href="https://elastisys.io/compliantkubernetes/img/favicon-16x16.png?v=1" rel="icon" sizes="16x16" type="image/png"/>
<link href="https://elastisys.io/compliantkubernetes/img/site.webmanifest?v=1" rel="manifest"/>
<link color="#5bbad5" href="https://elastisys.io/compliantkubernetes/img/safari-pinned-tab.svg?v=1" rel="mask-icon"/>
<link href="https://elastisys.io/compliantkubernetes/img/favicon.ico?v=1" rel="shortcut icon"/>
<meta content="#2b5797" name="msapplication-TileColor"/>
<meta content="https://elastisys.io/compliantkubernetes/img/browserconfig.xml?v=1" name="msapplication-config"/>
<meta content="#ffffff" name="theme-color"/>
<link href="../../assets/stylesheets/extra-style.ozezcm8m.min.css" rel="stylesheet"/></head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="elastisys" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#logging">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<div data-md-color-scheme="default" data-md-component="outdated" hidden="">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Elastisys Compliant Kubernetes" class="md-header__button md-logo" data-md-component="logo" href="../.." title="Elastisys Compliant Kubernetes">
<img alt="logo" src="../../img/logo.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Elastisys Compliant Kubernetes
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Logs
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<ul class="header-links">
<li>
<a href="https://github.com/elastisys/compliantkubernetes/">
<img alt="Git logo" src="../../img/git-alt.svg" width="25px">
</img></a>
</li>
<li><a class="menu-callout" href="https://elastisys.com/">Try out Managed<br/>Compliant Kubernetes</a></li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Elastisys Compliant Kubernetes" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="Elastisys Compliant Kubernetes">
<img alt="logo" src="../../img/logo.png"/>
</a>
    Elastisys Compliant Kubernetes
  </label>
<div class="md-nav__source">
<ul class="header-links">
<li>
<a href="https://github.com/elastisys/compliantkubernetes/">
<img alt="Git logo" src="../../img/git-alt.svg" width="25px">
</img></a>
</li>
<li><a class="menu-callout" href="https://elastisys.com/">Try out Managed<br/>Compliant Kubernetes</a></li>
</ul>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
        Overview
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          For Application Developers
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          For Application Developers
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_1">
<span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../prepare/">
        Step 1: Prepare
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../deploy/">
        Step 2: Deploy
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../operate/">
        Step 3: Operate
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
          Go Deeper
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
          Go Deeper
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../prepare-application/">
        Prepare Your Application
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../prepare-idp/">
        Prepare Your Identity Provider (IdP)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../registry/">
        Container registry
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../continous-development/">
        Continous Development
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../network-model/">
        Network Model
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../kubernetes-api/">
        Kubernetes API
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../kubernetes-ui/">
        Kubernetes UI (Lens)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../namespaces/">
        Namespaces
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Logs
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Logs
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#compliance-needs">
    Compliance needs
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#opensearch">
    OpenSearch
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#visualization-using-opensearch-dashboards">
    Visualization using OpenSearch Dashboards
  </a>
<nav aria-label="Visualization using OpenSearch Dashboards" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#data-visualization-and-exploration">
    Data Visualization and Exploration
  </a>
<nav aria-label="Data Visualization and Exploration" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#discover">
    Discover
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#visualize">
    Visualize
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dashboard">
    Dashboard
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#accessing-falco-and-opa-logs">
    Accessing Falco and OPA Logs
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#handling-mapping-conflicts">
    Handling Mapping Conflicts
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#running-example">
    Running Example
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#exporting-logs">
    Exporting logs
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#log-review-dashboard">
    Log review dashboard
  </a>
<nav aria-label="Log review dashboard" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kubeaudit">
    kubeaudit
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kubernetes">
    kubernetes
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#other">
    other
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#authlog">
    authlog
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#further-reading">
    Further Reading
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../log-based-alerts/">
        Log-based Alerts
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../long-term-log-retention/">
        Long-term Log Retention
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../metrics/">
        Metrics
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../alerts/">
        Metric Alerts
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../maintenance/">
        Maintenance
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../backup/">
        Backups
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ci-cd/">
        CI/CD
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../demarcation/">
        Demarcation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../delegation/">
        How to Delegate
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../how-many-environments/">
        How many environments?
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          Safeguards
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
          Safeguards
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../safeguards/">
        Overview
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../safeguards/enforce-no-root/">
        Enforce No Root
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../safeguards/enforce-podsecuritypolicies/">
        Enforce Restricted Privileges
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../safeguards/enforce-networkpolicies/">
        Enforce NetworkPolicies
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../safeguards/enforce-resources/">
        Enforce Resources
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../safeguards/enforce-trusted-registries/">
        Enforce Trusted Registries
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../safeguards/enforce-no-latest-tag/">
        Enforce No Latest Tag
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../safeguards/enforce-job-ttl/">
        Enforce Job TTL
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
          Additional Services
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_4">
<span class="md-nav__icon md-icon"></span>
          Additional Services
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../additional-services/">
        Overview
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../additional-services/postgresql/">
        PostgreSQL
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../additional-services/timescaledb/">
        TimescaleDB
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../additional-services/redis/">
        Redis
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../additional-services/rabbitmq/">
        RabbitMQ
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../additional-services/jaeger/">
        Jaeger (preview)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../additional-services/argocd/">
        Argo CD (preview)
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
          Self-Managed Services
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_5">
<span class="md-nav__icon md-icon"></span>
          Self-Managed Services
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../self-managed-services/ferretdb/">
        FerretDB (self-managed)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../self-managed-services/keycloak/">
        Keycloak (self-managed)
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../go-live/">
        Go-live Checklist
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../troubleshooting/">
        Troubleshooting
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../faq/">
        FAQ
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          For Platform Administrators
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          For Platform Administrators
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../operator-manual/">
        Overview
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operator-manual/getting-started/">
        Getting Started
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operator-manual/provider-audit/">
        Provider Audit
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operator-manual/on-prem-standard/">
        Standard Template for on-prem Environment
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operator-manual/qa/">
        QA
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
          Advanced Configuration
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_6">
<span class="md-nav__icon md-icon"></span>
          Advanced Configuration
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../operator-manual/configure/">
        Overview
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operator-manual/cluster-sizing/">
        Sizing
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operator-manual/ingress/">
        Ingress
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operator-manual/access-control/">
        Access Control
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operator-manual/user-alerts/">
        User Alerts
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operator-manual/disaster-recovery/">
        Disaster Recovery
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operator-manual/break-glass/">
        Breaking the Glass
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operator-manual/cryptography/">
        Use of Cryptography
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operator-manual/credentials/">
        Use of Credentials
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operator-manual/capacity-management/">
        Capacity Management
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operator-manual/maintenance/">
        Maintenance
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operator-manual/troubleshooting/">
        Troubleshooting
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operator-manual/faq/">
        FAQ
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operator-manual/additional-services/">
        Additional Services
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          For CISOs and DPOs
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          For CISOs and DPOs
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../ciso-guide/">
        Overview
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ciso-guide/controls/iso-27001/">
        ISO 27001
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ciso-guide/controls/hslf-fs-201640/">
        HSLF-FS 2016:40
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ciso-guide/controls/msbfs-20207/">
        MSBFS 2020:7
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ciso-guide/controls/gdpr/">
        GDPR
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ciso-guide/controls/hipaa/">
        HIPAA
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ciso-guide/controls/bsi-it-grundschutz/">
        BSI IT-Grundschutz
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ciso-guide/controls/mdr/">
        MDR
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_9" id="__nav_4_9_label" tabindex="0">
          CISO Dashboards
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_9_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_9">
<span class="md-nav__icon md-icon"></span>
          CISO Dashboards
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../ciso-guide/audit-logs/">
        Audit Logs
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ciso-guide/backup/">
        Backup Dashboard
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ciso-guide/cryptography/">
        Cryptography Dashboard
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ciso-guide/intrusion-detection/">
        Intrusion Detection Dashboard
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ciso-guide/policy-as-code/">
        Policy-as-Code Dashboard
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ciso-guide/network-security/">
        Network Security Dashboard
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ciso-guide/capacity-management/">
        Capacity Management (Kubernetes Status) Dashboard
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ciso-guide/vulnerability/">
        Vulnerability Dashboard
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ciso-guide/log-review/">
        Log Review
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ciso-guide/faq/">
        FAQ
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ciso-guide/gdpr-art-17/">
        How do I comply with GDPR Art. 17 Right to erasure ("right to be forgotten")?
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          For Contributors
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          For Contributors
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../contributor-guide/">
        Overview
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../architecture/">
        Architecture
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../adr/">
        Architectural Decision Log
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tech-radar/">
        Tech Radar
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Release Notes
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
          Release Notes
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../release-notes/ck8s/">
        Compliant Kubernetes
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../release-notes/kubespray/">
        CK8S Kubespray
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../release-notes/postgres/">
        CK8S PostgreSQL
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../release-notes/rabbitmq/">
        CK8S RabbitMQ
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../release-notes/redis/">
        CK8S Redis
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../release-notes/jaeger/">
        CK8S Jaeger
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../release-notes/argocd/">
        CK8S Argo CD
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../glossary/">
        Glossary
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../roadmap/">
        Roadmap
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://elastisys.com/">
        Support
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://elastisys.com/training/">
        Training
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://elastisys.com/blog/">
        Blog
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://elastisys.com/privacy-policy/">
        Privacy Policy
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#compliance-needs">
    Compliance needs
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#opensearch">
    OpenSearch
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#visualization-using-opensearch-dashboards">
    Visualization using OpenSearch Dashboards
  </a>
<nav aria-label="Visualization using OpenSearch Dashboards" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#data-visualization-and-exploration">
    Data Visualization and Exploration
  </a>
<nav aria-label="Data Visualization and Exploration" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#discover">
    Discover
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#visualize">
    Visualize
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dashboard">
    Dashboard
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#accessing-falco-and-opa-logs">
    Accessing Falco and OPA Logs
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#handling-mapping-conflicts">
    Handling Mapping Conflicts
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#running-example">
    Running Example
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#exporting-logs">
    Exporting logs
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#log-review-dashboard">
    Log review dashboard
  </a>
<nav aria-label="Log review dashboard" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#kubeaudit">
    kubeaudit
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#kubernetes">
    kubernetes
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#other">
    other
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#authlog">
    authlog
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#further-reading">
    Further Reading
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<nav class="md-tags">
<a class="md-tag" href="../../ciso-guide/controls/iso-27001#iso-27001-a1241-event-logging">ISO 27001 A.12.4.1 Event Logging</a>
<a class="md-tag" href="../../ciso-guide/controls/iso-27001#iso-27001-a1243-administrator-operator-logs">ISO 27001 A.12.4.3 Administrator &amp; Operator Logs</a>
<a class="md-tag" href="../../ciso-guide/controls/iso-27001#iso-27001-a16-information-security-incident-management">ISO 27001 A.16 Information Security Incident Management</a>
</nav>
<h1 id="logging">Logging<a class="headerlink" href="#logging" title="Permanent link">¶</a></h1>
<p>Compliant Kubernetes (CK8s) provides the mechanism to manage your cluster as well as  the lifecycle of thousands of containerized applications deployed in  the cluster. The resources managed by CK8s are expected to be highly distributed with dynamic behaviors. An instance of CK8s cluster  environment involves several components with  nodes that host hundreds of containers that are constantly being spun up and destroyed based on workloads.</p>
<p>When dealing with a large pool of containerized applications and workloads in CK8s, it is imperative to be proactive with continuous monitoring and debugging information in order to observe what is going on the cluster. These information can be seen at the container, node, or cluster level.  Logging as one of the <a href="https://www.oreilly.com/library/view/distributed-systems-observability/9781492033431/ch04.html#:~:text=Logs%2C%20metrics%2C%20and%20traces%20are,ability%20to%20build%20better%20systems.">three pillars of observability</a> is a crucial element to manage and monitor services and infrastructure. It allows you to track debugging information at different levels of granularity.</p>
<h2 id="compliance-needs">Compliance needs<a class="headerlink" href="#compliance-needs" title="Permanent link">¶</a></h2>
<p>The requirements to comply with ISO 27001 are stated in ISO <a href="https://www.isms.online/iso-27001/">27001:2013</a>. The annexes that mostly concerns logging are:</p>
<ul>
<li><a href="https://www.isms.online/iso-27001/annex-a-12-operations-security/">Annex 12</a>, article A.12.4.1 "Event Logging" and A.12.4.3 "Administrator and Operator Logs".</li>
<li><a href="https://www.isms.online/iso-27001/annex-a-16-information-security-incident-management/">Annex 16</a> which deals with incident management.</li>
</ul>
<p>In Compliant Kubernetes, OpenSearch is separate from the production workload, hence it complies with A.12.4.2 "Protection of Log Information". The Infrastructure Provider should ensure that the clock of Kubernetes nodes is synchronized, hence complying with A.12.4.4 "Clock Synchronisation".</p>
<h2 id="opensearch">OpenSearch<a class="headerlink" href="#opensearch" title="Permanent link">¶</a></h2>
<p>Raw logs in CK8s are normalized, filtered, and processed by <a href="https://www.fluentd.org/">fluentd</a> and shipped to <a href="https://opensearch.org/">OpenSearch</a> for storage and analysis. OpenSearch is derived from the fully open source version of Elasticsearch called  <a href="https://logz.io/blog/open-distro-for-elasticsearch/">Open Distro for Elasticsearch</a>.</p>
<p>OpenSearch provides a powerful, easy-to-use event monitoring and alerting system, enabling you to monitor, search, visualize your data among other things. OpenSearch Dashboards is used as visualization and analysis interface for OpenSearch for all your logs.</p>
<h2 id="visualization-using-opensearch-dashboards">Visualization using OpenSearch Dashboards<a class="headerlink" href="#visualization-using-opensearch-dashboards" title="Permanent link">¶</a></h2>
<p>OpenSearch Dashboards is used as a data visualization and exploration tool for log time-series  and aggregate analytics. It offers powerful and easy-to-use features such as histograms, line graphs, pie charts, heat maps, and built-in geospatial support.</p>
<p>When you log into OpenSearch Dashboards, you will start at the home page as shown below.</p>
<p><img alt="OpenSearch Dashboards" src="../../img/osd-home.png"/></p>
<p>From here click "Visualize &amp; analyze" to continue and you will be greeted with the options to go forward to either <strong>Dashboard</strong> or <strong>Discover</strong>. Opening the sidebar in the top left will also provide navigation to OpenSearch Dashboards features, and here <strong>Visualize</strong> can be found in addition to the two former two outlined in the page shown below.</p>
<p><img alt="OpenSearch Dashboards Sidebar" src="../../img/osd-sidebar.png"/></p>
<p>Since we are concerned with searching logs and their visualization, we will focus on these three features indicated by the red rectangle in the figure above. If you are interested to know more about the rest please visit the <a href="https://opensearch.org/docs/latest/dashboards/index/">official OpenSearch Dashboards documentation</a>.</p>
<p>Before we dive in further, let us discuss the type of logs ingested into OpenSearch. Logs in CK8s cluster are filtered and indexed by fluentd into four categories.</p>
<p><strong>Application level logs</strong></p>
<ul>
<li>
<p><strong>Kubeaudit logs</strong> related to <a href="https://kubernetes.io/docs/tasks/debug-application-cluster/audit/">Kubernetes audits</a> to provide security-relevant chronological set of records documenting the sequence of activities that have affected system by individual users, administrators or other components of the system. This is mostly related to the ISO 27001 requirement A.12.4.3 "Administrator and Operator Logs".</p>
</li>
<li>
<p><strong>Kubernetes logs</strong> that provide insight into CK8s resources such as Nodes, Pods, Containers, Deployments and ReplicaSets. This allows you to observe the interactions between those resources and see the effects that one action has on another. Generally, logs in the CK8s ecosystem can be divided into the cluster level (logs outputted by components such as the kubelet, the API server, the scheduler) and the application level (logs generated by pods and containers). This is mostly related to the ISO 27001 requirement A.12.4.3 "Administrator and Operator Logs".</p>
</li>
</ul>
<p><strong>Platform level logs</strong></p>
<ul>
<li>
<p><strong>Authlog</strong> includes information about system authorization, along with user logins and the authentication mechanism that were used. Such as SSH access to the Nodes. This is mostly related to the ISO 27001 requirement A.12.4.3 "Administrator and Operator Logs".</p>
</li>
<li>
<p><strong>Others</strong> logs other than the above two are indexed and shipped to OpenSearch as <em>others</em>. These logs are collected from the Node's <a href="https://www.freedesktop.org/software/systemd/man/systemd-journald.service.html#"><code>journald</code></a> logging system.</p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Users</strong> can only view the logs of <strong>kubernetes</strong> and <strong>kubeaudit</strong>. <strong>authlog</strong> and <strong>others</strong> are for Compliant Kubernetes administrators.</p>
</div>
<p>Let us dive into it then.</p>
<h3 id="data-visualization-and-exploration">Data Visualization and Exploration<a class="headerlink" href="#data-visualization-and-exploration" title="Permanent link">¶</a></h3>
<p>As you can see in the figure above, data visualization and exploration in OpenSearch Dashboards has three components: <strong>Discover</strong>, <strong>Visualize</strong> and <strong>Dashboard</strong>. The following section describes each components using examples.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These following examples were created for Open Distro for Elasticsearch and Kibana, however the user experience is the same when using OpenSearch Dashboards.</p>
</div>
<h4 id="discover">Discover<a class="headerlink" href="#discover" title="Permanent link">¶</a></h4>
<p>The <strong>Discover</strong> component in OpenSearch Dashboards is used for exploring, searching and filtering logs.</p>
<p>Navigate to <strong>Discover</strong> as shown previously to access the features provided by it. The figure below shows partial view of the page that you will get under <strong>Discover</strong>.</p>
<p><img alt="Discover" src="../../img/discover.png"/></p>
<p>As you can see in the above figure, the <strong>kubeaudit</strong> index logs are loaded by default. If you want to explore logs from either of the other two log indices please select the right index under the dropdown menu marked <em>log index category</em>.</p>
<p>To appreciate the searching and filtering capability, let us get data for the following question:</p>
<p><strong>Get all logs that were collected for the past 20 hours in host 172.16.0.3 where the responseStatus reason is notfound</strong></p>
<p>We can use different ways to find the answer for the question. Below is one possible solution.</p>
<ol>
<li>
<p>Write <strong>sourceIPs: 172.16.0.3</strong>  in the <strong>search textbox</strong>.</p>
</li>
<li>
<p>Click <strong>Add Filter</strong> and select <strong>responseStatus.reason</strong> and <strong>is</strong> under <strong>field</strong> and <strong>Operator</strong> dropdown menus respectively. Finally, enter
<strong>notfound</strong> under <strong>Value</strong> input box and click <strong>Save</strong>. The following figure shows the details.</p>
<p><img alt="Discover Filter" src="../../img/discover_filter.png"/></p>
</li>
<li>
<p>To enter the 20 hours, click part that is labelled <strong>Time</strong> in the <strong>Discover</strong> figure above, then enter <strong>20</strong> under the input box and select <strong>hours</strong> in the dropdown menu. Make sure that you are under <strong>Relative</strong> tab. Finally, click <strong>update</strong>. The following figure shows how to set the hours. Note that the data will be automatically updated as time passes to reflect the past 20 hours data from the current time.</p>
<p><img alt="Discover Time" src="../../img/discover_hours.png"/></p>
</li>
</ol>
<p>Once you are done, you will see a result similar to the following figure.</p>
<p><img alt="Kibana" src="../../img/discover_filter_hours_result.png"/></p>
<h4 id="visualize">Visualize<a class="headerlink" href="#visualize" title="Permanent link">¶</a></h4>
<p>The <strong>Visualize</strong> component in OpenSearch Dashboards is to create different visualizations. Let us create a couple of visualizations.</p>
<p>To create visualizations:</p>
<ol>
<li>Open the sidebar and click <strong>Visualize</strong> under OpenSearch Dashboards.</li>
<li>Click <strong>Create visualization</strong> button located on the top right side of the page.</li>
<li>Select a visualization type, we will use <strong>Pie</strong> here.</li>
<li>Choose an index pattern or saved search name under <strong>New Pie / Choose a source</strong>. You can utilize the search function. We will use the <strong>kubernetes*</strong> index here.</li>
</ol>
<p>By default a pie chart with the total number of logs will be provided by OpenSearch Dashboards. Let us divide the pie chart based on the number of logs contributed by each <strong>namespace</strong>. To do that perform the following steps:</p>
<ol>
<li>
<p>Under <strong>Buckets</strong> click <strong>Add</strong> then <strong>Split slices</strong>. See the figure below.</p>
<p><img alt="Visualize Bucket" src="../../img/add_bucket.png"/></p>
</li>
<li>
<p>Under <strong>Aggregation</strong> select <strong>Significant Terms</strong> terms. See the figure below.</p>
<p><img alt="Visualize Aggregation" src="../../img/aggregation.png"/></p>
</li>
<li>
<p>Under <strong>Field</strong> select <strong>kubernetes.namespace_name.keyword</strong> and under <strong>Size</strong> input <strong>10</strong>. See the figure below.</p>
<p><img alt="Visualize Fields" src="../../img/namespace.png"/></p>
</li>
<li>
<p>Click <strong>Update</strong> button located in the bottom right corner.</p>
</li>
</ol>
<p>The final result will look like the following figure.</p>
<p><img alt="Visualize Namespace Pie" src="../../img/namespace_pie.png"/></p>
<p>Please save the pie chart as we will use it later.</p>
<p>Let us create a similar pie chart using <strong>host</strong> instead of <strong>namespace</strong>. The chart will look like the following figure.</p>
<p><img alt="Visualize Host Pie" src="../../img/host_pie.png"/></p>
<h4 id="dashboard">Dashboard<a class="headerlink" href="#dashboard" title="Permanent link">¶</a></h4>
<p>The <strong>Dashboard</strong> component in OpenSearch Dashboards is used for organizing related visualizations together.</p>
<p>Let us bring the two visualizations that we created above together in a single dashboard.</p>
<p>To do that:</p>
<ol>
<li>Open the sidebar and click <strong>Dashboard</strong> under OpenSearch Dashboards.</li>
<li>Click <strong>Create dashboard</strong> button located on the top right side of the page.</li>
<li>Click <strong>Add an existing</strong> link located on the left side.</li>
<li>Select the name of the two charts/visualizations that you created above.</li>
</ol>
<p>The figure below shows the dashboard generated from the above steps showing the two pie charts in a single page.</p>
<p><img alt="Dashboard" src="../../img/dashboard.png"/></p>
<h2 id="accessing-falco-and-opa-logs">Accessing Falco and OPA Logs<a class="headerlink" href="#accessing-falco-and-opa-logs" title="Permanent link">¶</a></h2>
<p>To access Falco or OPA logs, go to the  <strong>Discover</strong> panel and write <strong>Falco</strong> or <strong>OPA</strong> on the <strong>search textbox</strong>.  Make sure that  the <strong>Kubernetes</strong> log index category is selected.</p>
<p>The figure below shows  the search result for <strong>Falco</strong> logs.
<img alt="Falco logs" src="../../img/falco_log.png"/></p>
<p>The figure below shows the search result for <strong>OPA</strong> logs.
<img alt="OPA logs" src="../../img/opa_log.png"/></p>
<h2 id="handling-mapping-conflicts">Handling Mapping Conflicts<a class="headerlink" href="#handling-mapping-conflicts" title="Permanent link">¶</a></h2>
<p>If you get the following error:</p>
<div class="highlight"><pre><span></span><code>Mapping conflict! A field is defined as several types (string,
integer, etc) across the indices that match this pattern. You may still
be able to use these conflict fields in parts of Kibana, but they will
be unavailable for functions that require Kibana to know their type.
Correcting this issue will require re-indexing your data.
</code></pre></div>
<p>This means that your application has changed the type of a field in your structured logs. For example, say version A of your application logs the HTTP request path in <code>request</code>. Later, version B logs the HTTP request path in <code>request.path</code> and the HTTP verb in <code>request.verb</code>. Essentially, <code>request</code> has changed from string to dictionary.</p>
<p>As a first step, review your application change management policy to reduce the chance of a log field changing type.</p>
<p>Second, ask your administrator to re-index the affected indices.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Re-indexing requires a lot of permissions, including creating and deleting indices, and changing Index templates. This may interfere with audit logs and <a href="../demarcation/">compromise platform security</a>. Therefore, to ensure platform security, re-indexing can only be performed by Compliant Kubernetes administrators.</p>
</div>
<h2 id="running-example">Running Example<a class="headerlink" href="#running-example" title="Permanent link">¶</a></h2>
<!--user-demo-logs-start-->
<p>The user demo application already includes structured logging: For each HTTP request, it logs the URL, the user agent, etc. Compliant Kubernetes further adds the Pod name, Helm Chart name, Helm Release name, etc. to each log entry.</p>
<p>The screenshot below gives an example of log entries produced by the user demo application. It was obtained by using the index pattern <code>kubernetes*</code> and the filter <code>kubernetes.labels.app_kubernetes_io/instance:myapp</code>.</p>
<p><img alt="Example of User Demo Logs" src="../../img/user-demo-logs.jpeg"/></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You may want to save frequently used searches as dashboards. Compliant Kubernetes saves and backs these up for you.</p>
</div>
<!--user-demo-logs-end-->
<h2 id="exporting-logs">Exporting logs<a class="headerlink" href="#exporting-logs" title="Permanent link">¶</a></h2>
<p>At the moment the reporting feature in OpenSearch doesn't work so instead we recommend you to use <a href="https://github.com/elasticsearch-dump/elasticsearch-dump">elasticsearch-dump</a>.</p>
<p>Example of exporting the <code>kubernetes-*</code> index pattern to a folder <code>opensearch-dump</code>:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>pull<span class="w"> </span>elasticdump/elasticsearch-dump
mkdir<span class="w"> </span>opensearch-dump

<span class="c1"># OpenSearch username and password</span>
<span class="c1"># This will be handed out from your Compliant Kubernetes administrator</span>
<span class="nv">OPENSEARCH_USERNAME</span><span class="o">=</span><span class="s2">"your-username"</span>
<span class="nv">OPENSEARCH_PASSWORD</span><span class="o">=</span><span class="s2">"your-password"</span>

<span class="c1"># Your domain that is used for your cluster.</span>
<span class="c1"># This is the same as the one you are using for your other services (grafana, harbor, etc.)</span>
<span class="nv">DOMAIN</span><span class="o">=</span><span class="s2">"your-domain"</span>

docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>-ti<span class="w"> </span>-v<span class="w"> </span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/opensearch-dump:/tmp<span class="w"> </span>elasticdump/elasticsearch-dump<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--input<span class="o">=</span><span class="s2">"https://</span><span class="si">${</span><span class="nv">OPENSEARCH_USERNAME</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">OPENSEARCH_PASSWORD</span><span class="si">}</span><span class="s2">@opensearch.ops.</span><span class="si">${</span><span class="nv">DOMAIN</span><span class="si">}</span><span class="s2">/kubernetes-*"</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--type<span class="o">=</span>data<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--output<span class="o">=</span>/tmp/opensearch-dump.json<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--searchBody<span class="o">=</span><span class="s1">'{"query":{......}}'</span>
</code></pre></div>
<p>For more examples and how to use the tool, read the documentation <a href="https://github.com/elasticsearch-dump/elasticsearch-dump#use">in the repo</a>.</p>
<h2 id="log-review-dashboard">Log review dashboard<a class="headerlink" href="#log-review-dashboard" title="Permanent link">¶</a></h2>
<p>This dashboard can be viewed to get a quick overview of the cluster's state.</p>
<p><img alt="Log review dashboard" src="../../img/log-review-dashboard.png"/></p>
<ul>
<li>
<h3 id="kubeaudit">kubeaudit<a class="headerlink" href="#kubeaudit" title="Permanent link">¶</a></h3>
<ul>
<li>All api-requests = Successful API requests</li>
<li>Forbid error = Forbidden API requests</li>
<li>Client Error = Client error logs</li>
<li>Server error = Server error logs</li>
</ul>
</li>
<li>
<h3 id="kubernetes">kubernetes<a class="headerlink" href="#kubernetes" title="Permanent link">¶</a></h3>
<ul>
<li>error OR denied = Error &amp; denied logs</li>
</ul>
</li>
<li>
<h3 id="other">other<a class="headerlink" href="#other" title="Permanent link">¶</a></h3>
<ul>
<li>error OR critical OR alert OR warning = System logs of priority 1-4</li>
</ul>
</li>
<li>
<h3 id="authlog">authlog<a class="headerlink" href="#authlog" title="Permanent link">¶</a></h3>
<ul>
<li>number of authlog seassions = Authlog seassions</li>
</ul>
</li>
</ul>
<h2 id="further-reading">Further Reading<a class="headerlink" href="#further-reading" title="Permanent link">¶</a></h2>
<ul>
<li><a href="https://opensearch.org/">OpenSearch</a></li>
<li><a href="https://opensearch.org/docs/latest/dashboards/index/">OpenSearch Dashboards</a></li>
<li><a href="https://opendistro.github.io/for-elasticsearch/">Open Distro for Elasticsearch</a></li>
<li><a href="https://opendistro.github.io/for-elasticsearch-docs/docs/kibana/">Kibana</a></li>
<li><a href="https://logz.io/blog/open-distro-for-elasticsearch/">Open Distro for Elasticsearch – How Different Is It?</a></li>
<li><a href="https://www.fluentd.org/">Fluentd</a></li>
</ul>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
            Back to top
          </button>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Namespaces" class="md-footer__link md-footer__link--prev" href="../namespaces/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                Namespaces
              </div>
</div>
</a>
<a aria-label="Next: Log-based Alerts" class="md-footer__link md-footer__link--next" href="../log-based-alerts/" rel="next">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                Log-based Alerts
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright © Elastisys AB <br/> The Linux Foundation has the following registered trademarks in the United States and/or other countries: Certified Kubernetes®, containerd®, fluentd®, Helm®, Istio®, K8s®, Kubernetes®, Prometheus®, PromQL®, Rook®, The Linux Foundation®. <br/> The Linux Foundation has registrations pending or trademarks in use for the following marks in the United States and/or other countries: Argo™, CoreDNS™, Falco™, Harbor™, Jaeger™, Linux Foundation™, OpenTelemetry™, OpenTracing™, Open Policy Agent™, Tekton™, Thanos™. <br/> Postgres and PostgreSQL and the Elephant Logo (Slonik) are all registered trademarks of the PostgreSQL Community Association of Canada. <br/> Redis is a trademark of Redis Ltd. Any rights therein are reserved to Redis Ltd. Any use by the Compliant Kubernetes project is for referential purposes only and does not indicate any sponsorship, endorsement or affiliation between Redis and Compliant Kubernetes project. <br/> RabbitMQ is a trademark of VMware, Inc. in the U.S. and other countries. <br/> TimescaleDB and the EON mascot are trademarks of <a href="https://www.timescale.com/">Timescale, Inc.</a> <br/> FerretDB® is a registered trademark of FerretDB, Inc. FerretDB Inc. is not affiliated, associated, authorized, endorsed by, or in any way officially connected with MongoDB Inc., or any of its subsidiaries or its affiliates. <br/> MongoDB, Mongo, and the leaf logo are registered trademarks of MongoDB, Inc. <br/> Keycloak™ is a trademark of Red Hat Inc. <br/> OpenSearch is a registered trademark of Amazon Web Services. <br/> NGINX is a registered trademark of F5 Inc.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "content.code.copy", "content.tabs.link", "navigation.footer", "navigation.top"], "search": "../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
<script src="../../assets/javascripts/bundle.220ee61c.min.js"></script>
</body>
</html>